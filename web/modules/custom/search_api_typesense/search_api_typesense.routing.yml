# Metrics

search_api_typesense.server.metrics:
  path: '/admin/config/search/search-api/server/{search_api_server}/metrics'
  defaults:
    _title: 'Server metrics'
    _controller: '\Drupal\search_api_typesense\Controller\TypesenseServerController::metrics'
  options:
    parameters:
      search_api_server:
        type: entity:search_api_server
        with_config_overrides: TRUE
  requirements:
    _permission: 'administer search_api'
    _search_api_typesense_server_local_action_access_check: 'TRUE'

# Api keys management

search_api_typesense.server.api_keys:
  path: '/admin/config/search/search-api/server/{search_api_server}/api-keys'
  defaults:
    _title: 'API Keys'
    _form: 'Drupal\search_api_typesense\Form\ApiKeysForm'
  options:
    parameters:
      search_api_server:
        type: entity:search_api_server
        with_config_overrides: TRUE
  requirements:
    _permission: 'administer search_api'
    _search_api_typesense_server_local_action_access_check: 'TRUE'

search_api_typesense.server.api_keys.delete:
  path: '/admin/config/search/search-api/server/{search_api_server}/api-keys/{id}/delete'
  defaults:
    _title: 'Key Delete'
    _form: 'Drupal\search_api_typesense\Form\KeyDeleteForm'
  options:
    parameters:
      search_api_server:
        type: entity:search_api_server
        with_config_overrides: TRUE
      id:
        type: int
  requirements:
    _permission: 'administer search_api'
